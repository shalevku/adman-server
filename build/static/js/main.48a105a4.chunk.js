(this["webpackJsonpadman-client"]=this["webpackJsonpadman-client"]||[]).push([[0],{163:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(51),o=n.n(r),s=n(23),i=(n(157),n(158),n(161),n(162),n(163),n(101)),l=n.n(i),d=n(122),j=n(10),u=n(18),b=n(293),h=n(301),p=n(300),O=n(288),x=n(284),g=n(297),f=n(281),m=n(130),v=n.n(m),y=n(125),w=n.n(y),C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new FormData;if(n!=={})for(var c in n)a.append(c,n[c]);return w()({url:e,method:t,headers:{"content-type":"multipart/form-data"},data:a})},S=n(3),k=n(14),P=n(271),T=n(269),D=n(275),A=n(289),U=n(270),I=n(277),F=n(254),N=n(265),R=n(282),E=n(283),G=n(285),M=n(286),L=n(287),z=n(0),H=function(e){var t=Object(a.useContext)(Ne).authUser,n=Object(u.h)();console.log("".concat(e.name,"UserForm at ").concat(n.pathname,"."));var c=Object(u.i)(),r="",o="",s={id:!1,email:!1,password:!1,name:!1,update:!1,destroy:!1,create:!1,login:!1};switch(e.name){case"existing":r="/api/users/".concat(c.id),o="put",Object.assign(s,{id:!0,email:!0,password:!0,name:!0,update:!0,destroy:!0});break;case"new":r="/api/users",o="post",Object.assign(s,{email:!0,password:!0,name:!0,create:!0});break;case"login":r="/api/userSession",o="post",Object.assign(s,{email:!0,password:!0,login:!0})}t||(s.update=s.destroy=!1);var i=Object(a.useState)({email:!1,password:!1,name:!1}),l=Object(j.a)(i,2),d=l[0],b=l[1],h=Object(a.useState)({email:"",password:"",name:""}),p=Object(j.a)(h,2),O=p[0],x=p[1],g=function(t){var n=t.target,a=n.name,c=n.value,r=n.validity.valid,o=n.validationMessage;"email"===a&&(n.validity.valid&&-1===c.substring(c.indexOf("@")).indexOf(".")&&(r=!1,o="You're missing a . after the @"));b((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(S.a)({},a,!r))})),x((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(S.a)({},a,o))})),e.onChange(a,c)},m=Object(a.useState)(!1),v=Object(j.a)(m,2),y=v[0],w=v[1],C=function(){w(!1)};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(I.a,{component:"form",sx:{width:"350px",marginTop:"10px"},name:e.name,action:r,method:o,onSubmit:function(t){t.preventDefault();var n=new URL(t.target.action).pathname;e.onSubmit(n,o)},children:[Object(z.jsxs)(F.a,{direction:"column",spacing:3,alignItems:"flex-start",height:"300px",sx:{paddingTop:"10px"},children:[s.id&&Object(z.jsx)(N.a,{id:"id",label:"ID",name:"id",value:e.user.id,onChange:g,disabled:!0,sx:{width:"10ch"}}),s.email&&Object(z.jsx)(N.a,Object(k.a)(Object(k.a)({id:"email",label:"Email",type:"email",name:"email",value:e.user.email,onChange:g,required:!0,error:d.email},d.email&&{helperText:O.email}),{},{InputProps:{sx:{width:"200px"}}})),s.password&&Object(z.jsx)(N.a,Object(k.a)(Object(k.a)({id:"password",label:"Password",type:"password",name:"password",value:e.user.password,onChange:g,required:!0,error:d.password},d.password&&{helperText:O.password}),{},{autoComplete:"new"===e.name||"existing"===e.name?"new-password":"current-password",InputProps:{sx:{width:"200px"}},inputProps:{maxLength:20}})),s.name&&Object(z.jsx)(N.a,Object(k.a)({id:"name",label:"Name",name:"name",value:e.user.name,onChange:g,required:!0,error:d.name},d.name&&{helperText:O.name}))]}),Object(z.jsx)("hr",{}),Object(z.jsxs)(F.a,{direction:"row",justifyContent:"space-between",children:[s.update&&Object(z.jsx)(f.a,{type:"submit",variant:"contained",children:"Update"}),s.destroy&&Object(z.jsx)(f.a,{variant:"outlined",color:"warning",onClick:function(){w(!0)},sx:{marginLeft:"25px"},children:"Destroy"}),s.create&&Object(z.jsx)(f.a,{type:"submit",variant:"contained",children:"Create"}),s.login&&Object(z.jsx)(f.a,{type:"submit",variant:"contained",children:"login"})]})]}),Object(z.jsxs)(R.a,{open:y,onClose:C,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(z.jsx)(E.a,{id:"alert-dialog-title",children:"Destroy the user (and his ads)?"}),Object(z.jsx)(G.a,{children:Object(z.jsx)(M.a,{id:"alert-dialog-description",children:"If you destroy this user, you will also destroy all of his ads, so be careful!"})}),Object(z.jsxs)(L.a,{children:[Object(z.jsx)(f.a,{onClick:C,children:"Disagree"}),Object(z.jsx)(f.a,{color:"warning",onClick:function(){w(!1),e.onDestroy()},autoFocus:!0,children:"Agree"})]})]})]})},q=function(e){var t=Object(u.g)(),n=Object(u.h)();console.log("UserSession at ".concat(n.pathname,"."));var c=Object(a.useContext)(Ne),r=Object(a.useState)(!1),o=Object(j.a)(r,2),s=o[0],i=o[1],l=Object(a.useState)({text:"",severity:"error"}),d=Object(j.a)(l,2),b=d[0],h=d[1],p=Object(a.useState)({id:"",email:"shalevku@gmail.com",password:"asdf",name:"Shalev Kubi"}),O=Object(j.a)(p,2),x=O[0],g=O[1],f=function(e,n){var a=Object(k.a)({},x);C(e,n,a).then((function(a){var r=a.data,o={post:"/api/users"===e?"Created":"Logged in",put:"Updated",delete:"Deleted"};switch(console.log("".concat(x.name," was ").concat(o[n],"!")),e){case"/api/users":v("User ".concat(x.name," created! Redirecting to login page in 2 seconds..."),"success"),setTimeout((function(){t.replace("/login")}),2e3);break;case"/api/userSession":c.login(r)}})).catch((function(e){return v(500===e.response.status?"The email is taken by someone else.":"Email or password is incorrect","error")}))},m=function(e,t){g((function(n){return Object(k.a)(Object(k.a)({},n),{},Object(S.a)({},e,t))}))};function v(e,t){i(!0),h({text:e,severity:t}),console.log("".concat(t,": ").concat(e))}function y(e,t){"clickaway"!==t&&i(!1)}return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(u.d,{children:[Object(z.jsx)(u.b,{exact:!0,path:"/login",children:Object(z.jsx)(H,{name:"login",user:x,onSubmit:f,onChange:m})}),Object(z.jsx)(u.b,{exact:!0,path:"/createAccount",children:Object(z.jsx)(H,{name:"new",user:x,onSubmit:f,onChange:m})})]}),Object(z.jsx)(P.a,{open:s,autoHideDuration:6e3,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(z.jsx)(T.a,{onClose:y,severity:b.severity,variant:"filled",children:b.text})})]})},B=function(){var e=Object(u.g)(),t=Object(u.h)(),n=Object(a.useState)(""),c=Object(j.a)(n,2),r=c[0],o=c[1];return Object(a.useEffect)((function(){o(t.pathname)}),[t.pathname]),Object(z.jsx)("div",{children:Object(z.jsxs)(D.a,{name:"user-session-page-switcher",value:r,onChange:function(n){var a=n.target.value;"/login"===t.pathname||"/createAccount"===t.pathname?e.replace(a):e.push(a)},row:!0,children:[Object(z.jsx)(A.a,{value:"/login",control:Object(z.jsx)(U.a,{}),label:"Login"}),Object(z.jsx)(A.a,{value:"/createAccount",control:Object(z.jsx)(U.a,{}),label:"Create Account"})]})})},Y=n(267),J=n(272),W=n(127),V=n.n(W),K=["Male","Female","Transgender","Gender neutral","Non-binary","Agender","Pangender","Genderqueer","Two-spirit","Third gender"],Q=["Torso and Legs","Head","Eyes","Ears","Neck","Torso","hands","Waist","Legs","Feet"],X=["Sweater","Dress","Hoodies","T-shirt","Flip-flops","Shorts","Skirt","Jeans","Shoes","Coat","High heels","Suit","Cap","Socks","Shirt","Bra","Scarf","Swimsuit","Hat","Gloves","Jacket","Long coat","Boots","Sunglasses","Tie","Polo shirt","Leather jackets"],Z=function(e){var t=Object(a.useContext)(Ne).authUser;console.log("".concat(e.name,"AdForm at ").concat(Object(u.h)().pathname,"."));var n=Object(u.i)(),c="",r="",o={id:!1,gender:!1,bodyPart:!1,type:!1,title:!1,description:!1,isGiven:!1,photo:!1,update:!1,destroy:!1,create:!1};switch(e.name){case"existing":c="/api/ads/".concat(n.id),r="put",Object.assign(o,{id:!0,gender:!0,bodyPart:!0,type:!0,title:!0,description:!0,isGiven:!0,photo:!0,update:!0,destroy:!0});break;case"new":c="/api/ads",r="post",Object.assign(o,{gender:!0,bodyPart:!0,type:!0,title:!0,description:!0,photo:!0,create:!0})}t||(o.update=o.destroy=o.create=!1);var s=function(t){var n=t.target,a=n.name,c=n.value;switch(n.type){case"file":c=n.files[0];break;case"checkbox":c=n.checked}e.onChange(a,c)},i=function(t,n){console.log("in handleAcChange"),console.log(t);var a=t.target.id,c=a.substring(0,a.indexOf("-"));e.onChange(c,n)},l=Object(a.useState)({gender:"",bodyPart:"",type:""}),d=Object(j.a)(l,2),b=d[0],h=d[1];return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(I.a,{component:"form",sx:{width:"350px",marginTop:"10px"},name:e.name,action:c,method:r,onSubmit:function(t){t.preventDefault();var n=new URL(t.target.action).pathname;e.onSubmit(n,r)},children:[Object(z.jsxs)(F.a,{direction:"column",spacing:3,alignItems:"flex-start",height:"350px",sx:{paddingTop:"10px",overflowY:"scroll","& .MuiAutocomplete-root":{width:"200px"}},children:[o.id&&Object(z.jsx)(N.a,{id:"id",label:"ID",name:"id",value:e.ad.id,onChange:s,disabled:!0,sx:{width:"10ch"}}),o.gender&&Object(z.jsx)(Y.a,{freeSolo:!0,id:"gender",value:e.ad.gender,onChange:i,inputValue:b.gender,onInputChange:function(e,t){h((function(e){return Object(k.a)(Object(k.a)({},e),{},{gender:t})}))},options:K,disabled:!t,renderInput:function(e){return Object(z.jsx)(N.a,Object(k.a)(Object(k.a)({},e),{},{name:"gender",label:"Gender"}))}}),o.bodyPart&&Object(z.jsx)(Y.a,{freeSolo:!0,id:"bodyPart",value:e.ad.bodyPart,onChange:i,inputValue:b.bodyPart,onInputChange:function(e,t){h((function(e){return Object(k.a)(Object(k.a)({},e),{},{bodyPart:t})}))},options:Q,disabled:!t,renderInput:function(e){return Object(z.jsx)(N.a,Object(k.a)(Object(k.a)({},e),{},{name:"body-part",label:"Body Part"}))}}),o.type&&Object(z.jsx)(Y.a,{freeSolo:!0,id:"type",value:e.ad.type,onChange:i,inputValue:b.type,onInputChange:function(e,t){h((function(e){return Object(k.a)(Object(k.a)({},e),{},{type:t})}))},options:X,disabled:!t,renderInput:function(e){return Object(z.jsx)(N.a,Object(k.a)(Object(k.a)({},e),{},{name:"type",label:"Type"}))}}),o.title&&Object(z.jsx)(N.a,{id:"title",label:"Title",name:"title",value:e.ad.title,onChange:s,required:!0,disabled:!t}),o.description&&Object(z.jsx)(N.a,{id:"description",label:"Description",name:"description",value:e.ad.description,onChange:s,required:!0,disabled:!t}),o.isGiven&&Object(z.jsx)(A.a,{control:Object(z.jsx)(J.a,{name:"isGiven",checked:e.ad.isGiven,onChange:s,disabled:!t}),label:"Is Given?"}),o.photo&&Object(z.jsxs)(f.a,{variant:"contained",component:"label",startIcon:Object(z.jsx)(V.a,{}),children:["Upload a Photo",Object(z.jsx)("input",{id:"photo",name:"photo",type:"file",onChange:s,disabled:!t,accept:"image/*",hidden:!0})]})]}),Object(z.jsx)("hr",{}),Object(z.jsxs)(F.a,{direction:"row",justifyContent:"space-between",children:[o.update&&Object(z.jsx)(f.a,{type:"submit",variant:"contained",children:"Update"}),o.destroy&&Object(z.jsx)(f.a,{variant:"outlined",color:"warning",onClick:function(){return e.onDestroy()},children:"Destroy"}),o.create&&Object(z.jsx)(f.a,{type:"submit",variant:"contained",children:"Create"})]})]})})},$=n(21),_=n(62),ee=n.n(_),te=n(213),ne=n(280),ae=n(261),ce=n(290),re=n(291),oe=n(292),se=n(276),ie=n(294),le=n(295),de=n(296),je=n(264),ue=n(299),be=n(298),he=n(90),pe=n.n(he),Oe=n(91),xe=n.n(Oe),ge=n(260),fe=function(e){var t=e.onSelectAllClick,n=e.order,a=e.orderBy,c=e.numSelected,r=e.rowCount,o=e.onRequestSort,s=function(e){return function(t){o(t,e)}},i=function(t){var n=t.target,a=n.name,c=n.value;e.onChange(a,c)};return Object(z.jsx)(ce.a,{children:Object(z.jsxs)(re.a,{children:[Object(z.jsx)(oe.a,{padding:"checkbox",children:Object(z.jsx)(J.a,{color:"primary",indeterminate:c>0&&c<r,checked:r>0&&c===r,onChange:t,inputProps:{"aria-label":"select all ads"}})}),e.headers.map((function(t){return Object(z.jsx)(oe.a,{align:t.isAlignRight?"right":"left",padding:t.disablePadding?"none":"normal",sortDirection:a===t.id&&n,children:e.filterOn?Object(z.jsx)(N.a,{id:t.id,name:t.id,value:e.rowFilter[t.id],onChange:i,label:t.label,size:"small"}):Object(z.jsxs)(se.a,{active:a===t.id,direction:a===t.id?n:"asc",onClick:s(t.id),children:[Object(z.jsx)("b",{children:ee.a.startCase("photoName"===t.label?"photo":t.label)}),a===t.id?Object(z.jsx)(b.a,{component:"span",sx:ge.a,children:"asc"===n?"sorted ascending":"sorted descending"}):null]})},t.id)}))]})})};function me(e){var t=e.selectedIndices.length;return Object(z.jsxs)(F.a,{direction:"row",justifyContent:"space-between",divider:Object(z.jsx)(ae.a,{orientation:"vertical",flexItem:!0}),sx:Object(k.a)({pl:{sm:2},pr:{xs:1,sm:1}},t>0&&{bgcolor:function(e){return Object(te.a)(e.palette.primary.main,e.palette.action.activatedOpacity)}}),children:[t>0?Object(z.jsxs)(x.a,{color:"inherit",variant:"subtitle1",component:"div",children:[t," selected"]}):Object(z.jsx)(x.a,{variant:"h4",id:"tableTitle",component:"div",children:"Ads"}),Object(z.jsx)(A.a,{control:Object(z.jsx)(be.a,{checked:e.dense,onChange:e.onDenseChange}),label:"Dense padding"}),t>0?Object(z.jsx)(ue.a,{title:"Delete",children:Object(z.jsx)(O.a,{onClick:e.onDestroy,children:Object(z.jsx)(pe.a,{})})}):Object(z.jsx)(ue.a,{title:"Filter list",children:Object(z.jsx)(O.a,{onClick:e.onFilterOn,children:Object(z.jsx)(xe.a,{})})}),Object(z.jsx)(je.a,{rowsPerPageOptions:[5,10,{value:e.rowsCount,label:"All"}],component:"div",count:e.rowsCount,rowsPerPage:e.rowsPerPage,page:e.page,onPageChange:e.onPageChange,onRowsPerPageChange:e.onRowsPerPageChange})]})}var ve=function(e){var t=Object(u.h)();console.log("AdsTable at ".concat(t.pathname,"."));var n=Object(a.useState)([]),c=Object(j.a)(n,2),r=c[0],o=c[1],i=Object(a.useState)(0),l=Object(j.a)(i,2),d=l[0],h=l[1],p=Object(a.useState)(!0),O=Object(j.a)(p,2),x=O[0],f=O[1],m=Object(a.useState)(10),v=Object(j.a)(m,2),y=v[0],w=v[1],C=[];Object.entries(e.initialElement).forEach((function(e,t){var n=Object(j.a)(e,2),a=n[0],c=n[1];C.push({id:a,isAlignRight:"string"!==typeof c&&"id"!==a,disablePadding:0===t,label:a})}));var P=d>0?Math.max(0,(1+d)*y-e.rows.length):0,T=Object(a.useState)("asc"),D=Object(j.a)(T,2),A=D[0],U=D[1],I=Object(a.useState)("calories"),F=Object(j.a)(I,2),N=F[0],R=F[1],E=Object(a.useState)(!1),G=Object(j.a)(E,2),M=G[0],L=G[1],H=Object(a.useState)([]),q=Object(j.a)(H,2),B=q[0],Y=q[1],W=Object(a.useState)(Object.fromEntries(C.map((function(e){return[e.id,""]})))),V=Object(j.a)(W,2),K=V[0],Q=V[1];return Object(a.useEffect)((function(){var t=e.rows.filter((function(e){return Object.keys(K).every((function(t){var n=e[t];return"number"===typeof n?n=n.toString():"boolean"===typeof n&&(n=n?"Yes":"No"),n.includes(K[t])}))}));Y(t)}),[e,K]),Object(z.jsx)(b.a,{sx:{width:"100%"},children:Object(z.jsxs)(ne.a,{sx:{width:"100%",mb:2},children:[Object(z.jsx)(ie.a,{sx:{height:"350px",overflowY:"scroll"},children:Object(z.jsxs)(le.a,{sx:{minWidth:750},"aria-labelledby":"Ads Table",size:x?"small":"medium",stickyHeader:!0,"aria-label":"sticky table",children:[Object(z.jsx)(fe,{headers:C,numSelected:r.length,order:A,orderBy:N,onSelectAllClick:function(t){var n=[];t.target.checked&&(n=e.rows.map((function(e,t){return t}))),o(n)},onRequestSort:function(e,t){R(t),U(N===t&&"asc"===A?"desc":"asc")},rowCount:e.rows.length,filterOn:M,onChange:function(e,t){Q((function(n){return Object(k.a)(Object(k.a)({},n),{},Object(S.a)({},e,t))}))},rowFilter:K}),Object(z.jsxs)(de.a,{children:[(M?B:e.rows).slice().sort(function(e,t){var n=function(e,t,n){return e[n]<t[n]?-1:e[n]>t[n]?1:0};return"asc"===e?function(e,a){return n(e,a,t)}:function(e,a){return-n(e,a,t)}}(A,N)).slice(d*y,d*y+y).map((function(e,t){var n=r.includes(t),a="enhanced-table-checkbox-".concat(t);return Object(z.jsxs)(re.a,{hover:!0,onClick:function(e){return function(e,t){var n=Object($.a)(r);n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),o(n)}(0,t)},role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,children:[Object(z.jsx)(oe.a,{padding:"checkbox",children:Object(z.jsx)(J.a,{color:"primary",checked:n,inputProps:{"aria-labelledby":a}})}),Object(z.jsx)(oe.a,{padding:"none",children:Object(z.jsx)(g.a,{underline:"hover",component:s.b,to:"/ads/".concat(e.id),children:e.id})}),Object.keys(ee.a.omit(e,["id","createdAt","updatedAt","UserId"])).map((function(t){var n=e[t];return"boolean"===typeof e[t]?n=e[t]?"Yes":"No":"photoName"===t&&(n=e.photoName&&Object(z.jsx)("img",{src:"/photos/".concat(e.UserId,"/").concat(e.photoName),alt:"".concat(e.title),width:"100px",height:"100px"})),Object(z.jsx)(oe.a,Object(k.a)(Object(k.a)({},"title"===t?{component:"th",id:a,scope:"row"}:{align:"string"!==typeof e[t]?"right":"left"}),{},{children:n}),"".concat(e.id,"-").concat(e[t]))})),Object(z.jsx)(oe.a,{children:Object(z.jsx)(g.a,{underline:"hover",component:s.b,to:"/users/".concat(e.UserId),children:e.UserId})})]},e.id)})),P>0&&Object(z.jsx)(re.a,{style:{height:(x?33:53)*P},children:Object(z.jsx)(oe.a,{colSpan:6})})]})]})}),Object(z.jsx)(me,{dense:x,onDenseChange:function(e){f(e.target.checked)},rowsCount:e.rows.length,rowsPerPage:y,onRowsPerPageChange:function(e){w(parseInt(e.target.value,10)),h(0)},page:d,onPageChange:function(e,t){h(t)},selectedIndices:r,onDestroy:function(t){e.onDestroy(r)},onFilterOn:function(t){L((function(e){return!e})),Y(e.rows)}})]})})},ye=n(129),we=n.n(ye),Ce=function(e){var t=Object(u.h)();console.log("Carousel at ".concat(t.pathname,"."));return Object(z.jsx)("div",{id:"slick-slider-wrapper",children:Object(z.jsx)(we.a,Object(k.a)(Object(k.a)({},{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1}),{},{children:e.value.map((function(e){return e.photoName&&Object(z.jsx)("img",{src:"/photos/".concat(e.UserId,"/").concat(e.photoName),alt:e.title,width:"1090px",height:"400px"},e.id)}))}))})},Se=["Male","Female","Transgender","Gender neutral","Non-binary","Agender","Pangender","Genderqueer","Two-spirit","Third gender"],ke=["Torso and Legs","Head","Eyes","Ears","Neck","Torso","hands","Waist","Legs","Feet"],Pe=["Sweater","Dress","Hoodies","T-shirt","Flip-flops","Shorts","Skirt","Jeans","Shoes","Coat","High heels","Suit","Cap","Socks","Shirt","Bra","Scarf","Swimsuit","Hat","Gloves","Jacket","Long coat","Boots","Sunglasses","Tie","Polo shirt","Leather jackets"],Te=function(){var e=Object(u.g)(),t=Object(u.h)();console.log("AdManager at ".concat(t.pathname,"."));var n=Object(u.i)().id,c=Object(a.useContext)(Ne).authUser,r=Object(a.useState)([]),o=Object(j.a)(r,2),s=o[0],i=o[1],l={id:"",gender:"Male",bodyPart:"Torso and Legs",type:"Sweater",title:"asdf1",description:"asdf desc1",isGiven:!1,photoName:"",UserId:""},d=Object(a.useState)(l),b=Object(j.a)(d,2),h=b[0],p=b[1],O=Object(a.useRef)(l),x=Object(a.useState)(!1),g=Object(j.a)(x,2),m=g[0],v=g[1],y=Object(a.useState)(!1),w=Object(j.a)(y,2),D=w[0],A=w[1],U=Object(a.useState)({text:"",severity:"error"}),I=Object(j.a)(U,2),F=I[0],N=I[1],G=function(t,a){var c=Object(k.a)({},h);C(t,a,c).then((function(t){var c=t.data;console.log("".concat(h.title," was ").concat({post:"Created",put:"Updated",delete:"Deleted"}[a],"!")),"post"===a?(v(!1),n||i((function(e){return e.concat(c)})),H("Ad ".concat(h.title," created!"),"success")):"put"===a&&(0!==s.length?(H("Ad ".concat(n," updated! Redirecting in 6 seconds to table..."),"success"),setTimeout((function(){e.push("/ads")}),6e3)):H("Ad ".concat(n," updated!"),"success"))})).catch((function(e){H(e.response.statusText,"error")}))};Object(a.useEffect)((function(){var e=O.current;n?C("/api/ads/".concat(n),"get").then((function(e){var t=e.data;p(t)})).catch((function(e){return H(e.response.text,"error")})):(C("/api/ads","get").then((function(e){var t=e.data;i(t)})).catch((function(e){return H(e.response.statusText,"error")})),p(e))}),[n]);var M=function(t){n?(C("/api/ads/".concat(n),"delete").then((function(){s.length?e.replace("/ads"):(p(l),H({text:"Ad ".concat(n," deleted!"),severity:"success"})),H("Ad destroyed!","success")})).catch((function(e){return H(e.response.statusText,"error")})),p(l)):function(){var e=function(){var e=t.pop();C("/api/ads/".concat(s[e].id),"delete").then((function(){i((function(t){return t.splice(e,1),t.slice()})),H("Ad(s) destroyed!","success")})).catch((function(e){return H(e.response.statusText,"error")}))};for(;t.length;)e()}()},L=function(e,t){p((function(n){return Object(k.a)(Object(k.a)({},n),{},Object(S.a)({},e,t))}))};function H(e,t){A(!0),N({text:e,severity:t}),console.log("".concat(t,": ").concat(e))}function q(e,t){"clickaway"!==t&&A(!1)}return F.text.includes("delete")?Object(z.jsx)("div",{children:F.text}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(u.d,{children:[Object(z.jsx)(u.b,{exact:!0,path:"/ads",children:Object(z.jsx)(ve,{initialElement:l,rows:s,onDestroy:M})}),Object(z.jsx)(u.b,{path:"/ads/:id",children:Object(z.jsx)(Z,{name:"existing",ad:h,onSubmit:G,onChange:L,onDestroy:M})}),Object(z.jsx)(u.b,{path:"/adsCarousel",children:Object(z.jsx)(Ce,{value:s})})]}),c&&Object(z.jsx)(f.a,{variant:"contained",onClick:function(){v(!0)},children:"Create a New ad"}),Object(z.jsxs)(R.a,{open:m,onClose:function(){v(!1),n&&(s.length?p(s[s.findIndex((function(e){return n===e.id.toString()}))]):C("/api/ads/".concat(n),"get").then((function(e){var t=e.data;p(t)})).catch((function(e){return H(e.response.statusText,"error")})))},scroll:"body",PaperProps:{sx:{padding:"0px 10px 10px"}},children:[Object(z.jsxs)(E.a,{sx:{fontSize:"1rem",padding:"8px 24px"},children:["Create a new Ad",Object(z.jsx)(f.a,{variant:"outlined",size:"small",onClick:function(){var e=Se[Math.floor(Math.random()*Se.length)],t=ke[Math.round(Math.random()*ke.length)],n=Pe[Math.round(Math.random()*Pe.length)],a=h.title.slice(0,-1)+(+h.title.slice(-1)+1),c=h.description.slice(0,-1)+(+h.description.slice(-1)+1);p(Object(k.a)(Object(k.a)({},h),{},{gender:e,bodyPart:t,type:n,title:a,description:c}))},children:"Generate random fields!"})]}),Object(z.jsx)(Z,{name:"new",ad:h,onSubmit:G,onChange:L})]}),Object(z.jsx)(P.a,{open:D,autoHideDuration:6e3,onClose:q,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(z.jsx)(T.a,{onClose:q,severity:F.severity,variant:"filled",children:F.text})})]})},De=function(){var e=Object(u.g)(),t=Object(u.h)(),n=Object(a.useState)(""),c=Object(j.a)(n,2),r=c[0],o=c[1];return Object(a.useEffect)((function(){o(t.pathname)}),[t.pathname]),Object(z.jsx)("div",{children:Object(z.jsxs)(D.a,{name:"ads-page-switcher",value:r,onChange:function(n){var a=n.target.value;"/ads"===t.pathname||"/adsCarousel"===t.pathname?e.replace(a):e.push(a)},row:!0,children:[Object(z.jsx)(A.a,{value:"/ads",control:Object(z.jsx)(U.a,{}),label:"Table"}),Object(z.jsx)(A.a,{value:"/adsCarousel",control:Object(z.jsx)(U.a,{}),label:"Carousel"})]})})},Ae=function(e){var t=e.onSelectAllClick,n=e.order,a=e.orderBy,c=e.numSelected,r=e.rowCount,o=e.onRequestSort,s=function(e){return function(t){o(t,e)}},i=function(t){var n=t.target,a=n.name,c=n.value;e.onChange(a,c)};return Object(z.jsx)(ce.a,{children:Object(z.jsxs)(re.a,{children:[Object(z.jsx)(oe.a,{padding:"checkbox",children:Object(z.jsx)(J.a,{color:"primary",indeterminate:c>0&&c<r,checked:r>0&&c===r,onChange:t,inputProps:{"aria-label":"select all users"}})}),e.headers.map((function(t){return Object(z.jsx)(oe.a,{align:t.isAlignRight?"right":"left",padding:t.disablePadding?"none":"normal",sortDirection:a===t.id&&n,children:e.filterOn?Object(z.jsx)(N.a,{id:t.id,name:t.id,value:e.rowFilter[t.id],onChange:i,label:t.label,size:"small"}):Object(z.jsxs)(se.a,{active:a===t.id,direction:a===t.id?n:"asc",onClick:s(t.id),children:[Object(z.jsx)("b",{children:ee.a.startCase("photoName"===t.label?"photo":t.label)}),a===t.id?Object(z.jsx)(b.a,{component:"span",sx:ge.a,children:"asc"===n?"sorted ascending":"sorted descending"}):null]})},t.id)}))]})})};function Ue(e){var t=e.numSelected;return Object(z.jsxs)(F.a,{direction:"row",justifyContent:"space-between",divider:Object(z.jsx)(ae.a,{orientation:"vertical",flexItem:!0}),sx:Object(k.a)({pl:{sm:2},pr:{xs:1,sm:1}},t>0&&{bgcolor:function(e){return Object(te.a)(e.palette.primary.main,e.palette.action.activatedOpacity)}}),children:[t>0?Object(z.jsxs)(x.a,{color:"inherit",variant:"subtitle1",component:"div",children:[t," selected"]}):Object(z.jsx)(x.a,{variant:"h4",id:"tableTitle",component:"div",children:"Users"}),Object(z.jsx)(A.a,{control:Object(z.jsx)(be.a,{checked:e.dense,onChange:e.onDenseChange}),label:"Dense padding"}),t>0?Object(z.jsx)(ue.a,{title:"Delete",children:Object(z.jsx)(O.a,{onClick:e.onDestroy,children:Object(z.jsx)(pe.a,{})})}):Object(z.jsx)(ue.a,{title:"Filter list",children:Object(z.jsx)(O.a,{onClick:e.onFilterOn,children:Object(z.jsx)(xe.a,{})})}),Object(z.jsx)(je.a,{rowsPerPageOptions:[5,10,{value:e.rows.length,label:"All"}],component:"div",count:e.rows.length,rowsPerPage:e.rowsPerPage,page:e.page,onPageChange:e.onPageChange,onRowsPerPageChange:e.onRowsPerPageChange})]})}var Ie=function(e){var t=Object(u.h)();console.log("UsersTable at ".concat(t.pathname,"."));var n=Object(a.useState)([]),c=Object(j.a)(n,2),r=c[0],o=c[1],i=Object(a.useState)(0),l=Object(j.a)(i,2),d=l[0],h=l[1],p=Object(a.useState)(!1),O=Object(j.a)(p,2),x=O[0],m=O[1],v=Object(a.useState)(10),y=Object(j.a)(v,2),w=y[0],C=y[1],P=[];Object.entries(e.initialElement).forEach((function(e,t){var n=Object(j.a)(e,2),a=n[0],c=n[1];P.push({id:a,isAlignRight:"string"!==typeof c&&"id"!==a,disablePadding:0===t,label:a})}));var T=d>0?Math.max(0,(1+d)*w-e.rows.length):0,D=Object(a.useState)("asc"),A=Object(j.a)(D,2),U=A[0],I=A[1],F=Object(a.useState)("calories"),N=Object(j.a)(F,2),H=N[0],q=N[1],B=Object(a.useState)(!1),Y=Object(j.a)(B,2),W=Y[0],V=Y[1],K=Object(a.useState)([]),Q=Object(j.a)(K,2),X=Q[0],Z=Q[1],_=Object(a.useState)(Object.fromEntries(P.map((function(e){return[e.id,""]})))),te=Object(j.a)(_,2),ae=te[0],ce=te[1];Object(a.useEffect)((function(){var t=e.rows.filter((function(e){return Object.keys(ae).every((function(t){var n=e[t];return"number"===typeof n?n=n.toString():"boolean"===typeof n&&(n=n?"Yes":"No"),n.includes(ae[t])}))}));Z(t)}),[e,ae]);var se=Object(a.useState)(!1),je=Object(j.a)(se,2),ue=je[0],be=je[1],he=function(){be(!1)};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(b.a,{sx:{width:"100%"},children:Object(z.jsxs)(ne.a,{sx:{width:"100%",mb:2},children:[Object(z.jsx)(ie.a,{sx:{height:"350px",overflow:"scroll"},children:Object(z.jsxs)(le.a,{sx:{minWidth:750},"aria-labelledby":"Users Table",size:x?"small":"medium",stickyHeader:!0,"aria-label":"sticky table",children:[Object(z.jsx)(Ae,{headers:P,numSelected:r.length,order:U,orderBy:H,onSelectAllClick:function(t){var n=[];t.target.checked&&(n=e.rows.map((function(e,t){return t}))),o(n)},onRequestSort:function(e,t){q(t),I(H===t&&"asc"===U?"desc":"asc")},rowCount:e.rows.length,filterOn:W,onChange:function(e,t){ce((function(n){return Object(k.a)(Object(k.a)({},n),{},Object(S.a)({},e,t))}))},rowFilter:ae}),Object(z.jsxs)(de.a,{children:[(W?X:e.rows).slice().sort(function(e,t){var n=function(e,t,n){return e[n]<t[n]?-1:e[n]>t[n]?1:0};return"asc"===e?function(e,a){return n(e,a,t)}:function(e,a){return-n(e,a,t)}}(U,H)).slice(d*w,d*w+w).map((function(e,t){var n=r.includes(t),a="enhanced-table-checkbox-".concat(t);return Object(z.jsxs)(re.a,{hover:!0,onClick:function(e){return function(e,t){var n=Object($.a)(r);n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),o(n)}(0,t)},role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,children:[Object(z.jsx)(oe.a,{padding:"checkbox",children:Object(z.jsx)(J.a,{color:"primary",checked:n,inputProps:{"aria-labelledby":a}})}),Object(z.jsx)(oe.a,{padding:"none",children:Object(z.jsx)(g.a,{underline:"hover",component:s.b,to:"/users/".concat(e.id),children:e.id})}),Object.keys(ee.a.omit(e,["id","createdAt","updatedAt"])).map((function(t){var n=e[t];return"boolean"===typeof e[t]?n=e[t]?"Yes":"No":"photoName"===t&&(n=e.photoName&&Object(z.jsx)("img",{src:"/photos/".concat(e.UserId,"/").concat(e.photoName),alt:"".concat(e.title),width:"100px",height:"100px"})),Object(z.jsx)(oe.a,Object(k.a)(Object(k.a)({},"name"===t?{component:"th",id:a,scope:"row"}:{align:"string"!==typeof e[t]?"right":"left"}),{},{children:n}),"".concat(e.id,"-").concat(e[t]))}))]},e.id)})),T>0&&Object(z.jsx)(re.a,{style:{height:(x?33:53)*T},children:Object(z.jsx)(oe.a,{colSpan:6})})]})]})}),Object(z.jsx)(Ue,{numSelected:r.length,selectedIndices:r,onDestroy:function(){be(!0)},dense:x,onDenseChange:function(e){m(e.target.checked)},rows:e.rows,rowsPerPage:w,onRowsPerPageChange:function(e){C(parseInt(e.target.value,10)),h(0)},page:d,onPageChange:function(e,t){h(t)},onFilterOn:function(){V((function(e){return!e})),Z(e.rows)}})]})}),Object(z.jsxs)(R.a,{open:ue,onClose:he,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(z.jsx)(E.a,{id:"alert-dialog-title",children:"Destroy the user (and his ads)?"}),Object(z.jsx)(G.a,{children:Object(z.jsx)(M.a,{id:"alert-dialog-description",children:"If you destroy this user, you will also destroy all of his ads, so be careful!"})}),Object(z.jsxs)(L.a,{children:[Object(z.jsx)(f.a,{onClick:he,children:"Disagree"}),Object(z.jsx)(f.a,{color:"warning",onClick:function(){be(!1),e.onDestroy(r)},autoFocus:!0,children:"Agree"})]})]})]})},Fe=function(){var e=Object(u.g)(),t=Object(u.h)();console.log("UserManager at ".concat(t.pathname,"."));var n=Object(u.i)().id,c=Object(a.useContext)(Ne),r=Object(a.useState)([]),o=Object(j.a)(r,2),s=o[0],i=o[1],l={id:"",email:"shalevku@gmail.com",password:"asdf",name:"Shalev Kubi"},d=Object(a.useState)(l),b=Object(j.a)(d,2),h=b[0],p=b[1],O=Object(a.useRef)(l),x=Object(a.useState)(!1),g=Object(j.a)(x,2),m=g[0],v=g[1],y=Object(a.useState)(!1),w=Object(j.a)(y,2),D=w[0],A=w[1],U=Object(a.useState)({text:"",severity:"error"}),I=Object(j.a)(U,2),F=I[0],N=I[1],G=function(t,a){var c=Object(k.a)({},h);C(t,a,c).then((function(t){var c=t.data;console.log("".concat(h.name," was ").concat({post:"Created",put:"Updated",delete:"Deleted"}[a],"!")),"post"===a?(v(!1),n||i((function(e){return e.concat(c)})),q("User ".concat(h.name," created!"),"success")):"put"===a&&(0!==s.length?(q("User ".concat(n," updated! Redirecting in 6 seconds to table..."),"success"),setTimeout((function(){e.push("/users")}),6e3)):q("User ".concat(n," updated!"),"success"))})).catch((function(e){return q(e.response.statusText,"error")}))};Object(a.useEffect)((function(){var e=O.current;n?C("/api/users/".concat(n),"get").then((function(e){var t=e.data;p(t)})).catch((function(e){return q(e.response.statusText,"error")})):(C("/api/users","get").then((function(e){var t=e.data;i(t)})).catch((function(e){return q(e.response.statusText,"error")})),p(e))}),[n]);var M=function(t){if(n)C("/api/users/".concat(n),"delete").then((function(){s.length?e.replace("/users"):(p(l),q({text:"User ".concat(n," deleted!"),severity:"success"})),q("User destroyed!","success")})).catch((function(e){return q(e.response.statusText,"error")})),p(l),n===c.authUser.id&&c.logout();else{!function(){var e=function(){var e=t.pop();C("/api/users/".concat(s[e].id),"delete").then((function(){i((function(t){return t.splice(e,1),t.slice()})),q("User(s) destroyed!","success")})).catch((function(e){return q(e.response.statusText,"error")}))};for(;t.length;)e()}();var a=s.findIndex((function(e){return c.authUser.id===e.id}));t.includes(a)&&console.log("in if"),setTimeout((function(){console.log("about to logout"),c.logout()}),3e3)}},L=function(e,t){p((function(n){return Object(k.a)(Object(k.a)({},n),{},Object(S.a)({},e,t))}))};function q(e,t){A(!0),N({text:e,severity:t}),console.log("".concat(t,": ").concat(e))}function B(e,t){"clickaway"!==t&&A(!1)}return F.text.includes("delete")?Object(z.jsx)("div",{children:F.text}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(u.d,{children:[Object(z.jsx)(u.b,{exact:!0,path:"/users",children:Object(z.jsx)(Ie,{initialElement:l,rows:s,onDestroy:M})}),Object(z.jsx)(u.b,{path:"/users/:id",children:Object(z.jsx)(H,{name:"existing",user:h,onSubmit:G,onChange:L,onDestroy:M})})]}),c.authUser&&Object(z.jsx)(f.a,{variant:"contained",onClick:function(){v(!0)},children:"Create a New user"}),Object(z.jsxs)(R.a,{open:m,onClose:function(){v(!1),n&&(s.length?p(s[s.findIndex((function(e){return n===e.id.toString()}))]):C("/api/users/".concat(n),"get").then((function(e){var t=e.data;p(t)})).catch((function(e){return q(e.response.statusText,"error")})))},scroll:"body",PaperProps:{sx:{padding:"0px 10px 10px"}},children:[Object(z.jsx)(E.a,{sx:{fontSize:"1rem",padding:"8px 24px"},children:"Create a new user"}),Object(z.jsx)(H,{name:"new",user:h,onSubmit:G,onChange:L})]}),Object(z.jsx)(P.a,{open:D,autoHideDuration:6e3,onClose:B,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(z.jsx)(T.a,{onClose:B,severity:F.severity,variant:"filled",children:F.text})})]})},Ne=c.a.createContext(),Re=["/ads/:id","/ads","/adsCarousel"],Ee=["/users/:id","/users"],Ge=function(e){var t=Object(a.useContext)(Ne).authUser,n=Object(u.h)();return console.log("PrivateRoute: location: ".concat(n.pathname)),Object(z.jsx)(u.b,{path:e.path,children:t?e.children:!console.log("please login first!")&&Object(z.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}})})},Me=function(){var e=Object(u.g)(),t=Object(u.h)();console.log("App at ".concat(t.pathname,"."));var n=Object(a.useState)(null),c=Object(j.a)(n,2),r=c[0],o=c[1],i=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("/api/userSession","delete");case 2:o(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m={authUser:r,login:function(n){o(n);var a=(t.state||{from:{pathname:"/"}}).from;e.replace(a)},logout:i};return Object(z.jsx)(Ne.Provider,{value:m,children:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(b.a,{sx:{flexGrow:1},children:Object(z.jsx)(h.a,{position:"static",color:"inherit",sx:{mb:"3px"},children:Object(z.jsxs)(p.a,{children:[Object(z.jsx)(O.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(z.jsx)(v.a,{})}),Object(z.jsx)(x.a,{variant:"h1",component:"h1",fontSize:"16px",sx:{flexGrow:1},children:Object(z.jsx)(g.a,{underline:"hover",component:s.b,to:"/",title:"Back to the homepage.",children:"Clothes Donation"})}),Object(z.jsxs)(u.d,{children:[Object(z.jsx)(u.b,{path:Ee,children:Object(z.jsx)(x.a,{variant:"h2",component:"h2",fontSize:"14px",sx:{flexGrow:1},children:"Manage Users"})}),Object(z.jsxs)(u.b,{path:["/login","/createAccount"],children:[Object(z.jsx)(x.a,{variant:"h2",component:"h2",fontSize:"14px",sx:{flexGrow:1},children:"User Session!"}),Object(z.jsx)(B,{})]}),Object(z.jsx)(u.b,{path:Re,children:Object(z.jsx)(x.a,{variant:"h2",component:"h2",fontSize:"14px",sx:{flexGrow:1},children:"Ads Manager!"})})]}),Object(z.jsx)(u.b,{path:Re,children:Object(z.jsx)(De,{})}),"/users"!==t.pathname&&Object(z.jsx)(g.a,{component:s.b,to:"/users",children:"Users"}),m.authUser?Object(z.jsxs)(f.a,{variant:"outlined",color:"warning",onClick:i,title:"Logout from your account",sx:{mr:2},children:["Logout ",m.authUser.name]}):!/login|createAccount/.test(t.pathname)&&Object(z.jsx)(g.a,{underline:"hover",component:s.b,to:{pathname:"/login",state:{from:t}},title:"Manage your ads.",sx:{mr:2},children:"Login"})]})})}),Object(z.jsxs)(u.d,{children:[Object(z.jsx)(u.a,{exact:!0,path:"/",to:"/ads"}),Object(z.jsx)(u.b,{path:Re,children:Object(z.jsx)(Te,{})}),Object(z.jsx)(Ge,{path:Ee,children:Object(z.jsx)(Fe,{})}),Object(z.jsx)(u.b,{path:["/login","/createAccount"],children:Object(z.jsx)(q,{})})]})]})})};o.a.render(Object(z.jsx)(c.a.StrictMode,{children:Object(z.jsx)(s.a,{children:Object(z.jsx)(Me,{})})}),document.getElementById("root"))}},[[209,1,2]]]);
//# sourceMappingURL=main.48a105a4.chunk.js.map